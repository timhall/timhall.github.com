/**
 * Sunlight
 *    Intelligent syntax highlighting
 *
 * http://sunlightjs.com/
 *
 * by Tommy Montgomery <http://tommymontgomery.com>
 * Licensed under WTFPL <http://sam.zoy.org/wtfpl/>
 */
(function(m,n,h){function i(a){function b(){}b.prototype=a;return new b}function t(a,b){var c;for(c=0;c<b.length;c++)a.appendChild(b[c])}function C(a){return a.charAt?a.charAt(a.length-1):a[a.length-1]}function p(a,b,c){var d;if(a.indexOf&&!c)return 0<=a.indexOf(b);for(d=0;d<a.length;d++)if(a[d]===b||c&&"string"===typeof a[d]&&"string"===typeof b&&a[d].toUpperCase()===b.toUpperCase())return!0;return!1}function q(a,b){var c;if(!b)return a;for(c in b)a[c]=b[c];return a}function z(a){return q({},a)}
function u(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function E(a,b,c,d){c=c.slice(0);return function(f){var e=a,g,k,j;1===b&&c.reverse();for(g=0;g<c.length;g++)if(j=f[e+g*b],k=c[c.length-1-g],j===h)if(k.optional!==h&&k.optional)e-=b;else return!1;else if(!(j.name===k.token&&(k.values===h||p(k.values,j.value,d))))if(k.optional!==h&&k.optional)e-=b;else return!1;return!0}}function L(a,b,c,d){return function(f){for(var e=a,g,k=!1;(g=f[--e])!==h;){if(g.name===c.token&&p(c.values,g.value)){if(g.name===
b.token&&p(b.values,g.value,d)){k=!0;break}return!1}if(g.name===b.token&&p(b.values,g.value,d)){k=!0;break}}if(!k)return!1;for(e=a;(g=f[++e])!==h;){if(g.name===b.token&&p(b.values,g.value,d)){if(g.name===c.token&&p(c.values,g.value,d)){k=!0;break}return!1}if(g.name===c.token&&p(c.values,g.value,d)){k=!0;break}}return k}}function w(a,b,c,d){var f=a.reader.current(),e,g,h,j=a.reader.getLine(),i=a.reader.getColumn(),b=b||[];a.language.caseInsensitive&&(f=f.toUpperCase());if(!b[f])return null;b=b[f];
for(e=0;e<b.length;e++)if(g=b[e].value,h=f+a.reader.peek(g.length),g===h||b[e].regex.test(h))return a.createToken(c,a.reader.current()+a.reader[d?"peek":"read"](g.length-1),j,i);return null}function A(a,b,c,d){for(var f=1,e,c=c||1;e=a[b+c*f++];)if(!d(e))return e;return h}function v(a,b,c){var d={},f,e,g;for(f=0;f<a.length;f++)e=c?a[f].toUpperCase():a[f],g=e.charAt(0),d[g]||(d[g]=[]),d[g].push({value:e,regex:RegExp("^"+u(e)+b,c?"i":"")});return d}function x(a,b,c){var a=F[a]||[],d;for(d=0;d<a.length;d++)a[d].call(b,
c)}function G(a){this.options=q(z(M),a)}var N=!+"\v1",O=N?"\r":"\n",P=function(){return null},Q=0,H,I,M={tabWidth:4,classPrefix:"sunlight-",showWhitespace:!1,maxHeight:!1},s={},R={},F={beforeHighlightNode:[],beforeHighlight:[],beforeTokenize:[],afterTokenize:[],beforeAnalyze:[],afterAnalyze:[],afterHighlight:[],afterHighlightNode:[]},y=function(a){return function(b){var c=n.createElement("span");c.className=b.options.classPrefix+a;c.appendChild(b.createTextNode(b.tokens[b.index]));return b.addNode(c)||
!0}};H={handleToken:function(a){return y(a.tokens[a.index].name)(a)},handle_default:function(a){return a.addNode(a.createTextNode(a.tokens[a.index]))},handle_ident:function(a){var b=function(b,d){var f,b=b||[];for(f=0;f<b.length;f++)if("function"===typeof b[f]){if(b[f](a))return y("named-ident")(a)}else if(d&&d(b[f])(a.tokens))return y("named-ident")(a);return!1};return b(a.language.namedIdentRules.custom)||b(a.language.namedIdentRules.follows,function(b){return E(a.index-1,-1,b,a.language.caseInsensitive)})||
b(a.language.namedIdentRules.precedes,function(b){return E(a.index+1,1,b,a.language.caseInsensitive)})||b(a.language.namedIdentRules.between,function(b){return L(a.index,b.opener,b.closer,a.language.caseInsensitive)})||y("ident")(a)}};var R={analyzer:i(H),customTokens:[],namedIdentRules:{},punctuation:/[^\w\s]/,numberParser:function(a){var b=a.reader.current(),c,d=a.reader.getLine(),f=a.reader.getColumn(),e=!0;if(/\d/.test(b))c=b,"0"===b&&"."!==a.reader.peek()&&(e=!1);else{if("."!==b||!/\d/.test(a.reader.peek()))return null;
c=b+a.reader.read();e=!1}for(;(b=a.reader.peek())!==a.reader.EOF;){if(!/[A-Za-z0-9]/.test(b)){if("."===b&&e&&/\d$/.test(a.reader.peek(2))){c+=a.reader.read();e=!1;continue}break}c+=a.reader.read()}return a.createToken("number",c,d,f)},caseInsensitive:!1,doNotParse:/\s/,contextItems:{},embeddedLanguages:{}},S=null,S=n.defaultView&&n.defaultView.getComputedStyle?n.defaultView.getComputedStyle:function(a){return a.currentStyle||{}};I=function(a,b){return S(a,null)[b]};var X=function(a,b){var c=a[2]||
[],d=a[1].length,f="string"===typeof a[1]?RegExp(u(a[1])):a[1].regex,e=a[3]||!1;return function(a,h,j,i,l,n){function q(b){var e,h=a.reader.current(),k;for(k=0;k<c.length;k++)if(e=(b?h:"")+a.reader.peek(c[k].length-b),e===c[k])return j+=a.reader.read(e.length-b),!0;e=(b?h:"")+a.reader.peek(d-b);if(f.test(e))return m=!0,!1;j+=b?h:a.reader.read();return!0}var m=!1,j=j||"",n=n?1:0;if(!n||q(!0))for(;a.reader.peek()!==a.reader.EOF&&q(!1););n?(j+=a.reader.current(),a.reader.read()):j+=e||a.reader.peek()===
a.reader.EOF?"":a.reader.read(d);m||(a.continuation=h);return a.createToken(b,j,i,l)}},V=function(a,b,c){b=s[b];c=c||{};b===h&&(b=s.plaintext);x("beforeHighlight",this,{code:a,language:b,previousContext:c});var d=c,f=this.options,e=[];x("beforeTokenize",this,{code:a,language:b});var g=a,k=function(a){if(0===a)return"";a=g.substring(j+1,j+(a||1)+1);return""===a?p:a},j=0,i=1,l=1,m,p=h,D,u,g=g.replace(/\r\n/g,"\n").replace(/\r/g,"\n");m=g.length;D=0<m?g.charAt(0):p;b={reader:{toString:function(){return"length: "+
m+", index: "+j+", line: "+i+", column: "+l+", current: ["+D+"]"},peek:function(a){return k(a)},substring:function(){return g.substring(j)},peekSubstring:function(){return g.substring(j+1)},read:function(a){var a=k(a),b;if(""===a)return a;a!==p?(j+=a.length,l+=a.length,u&&(i++,l=1,u=!1),b=a.substring(0,a.length-1).replace(/[^\n]/g,"").length,0<b&&(i+=b,l=1),b=C(a),"\n"===b&&(u=!0),D=b):(j=m,D=p);return a},text:function(){return g},getLine:function(){return i},getColumn:function(){return l},isEof:function(){return j>=
m},isSol:function(){return 1===l},isSolWs:function(){var a=j,b;if(1===l)return!0;for(;""!==(b=g.charAt(--a))&&"\n"!==b;)if(!/\s/.test(b))return!1;return!0},isEol:function(){return u},EOF:p,current:function(){return D}},language:b,items:z(b.contextItems),token:function(a){return e[a]},getAllTokens:function(){return e.slice(0)},count:function(){return e.length},options:f,embeddedLanguageStack:[],defaultData:{text:"",line:1,column:1},createToken:function(a,b,c,d){return{name:a,line:c,value:N?b.replace(/\n/g,
"\r"):b,column:d,language:this.language.name}}};d.continuation&&(f=d.continuation,d.continuation=null,e.push(f(b,f,"",b.reader.getLine(),b.reader.getColumn(),!0)));for(;!b.reader.isEof();){for(var d=b,r=f=void 0,f=0;f<d.language.embeddedLanguages.length;f++)if(s[d.language.embeddedLanguages[f].language]&&(r=z(d.language.embeddedLanguages[f]),r.switchTo(d))){r.oldItems=z(d.items);d.embeddedLanguageStack.push(r);d.language=s[r.language];d.items=q(d.items,z(d.language.contextItems));break}d=T(b);null!==
d&&(""!==b.defaultData.text&&(e.push(b.createToken("default",b.defaultData.text,b.defaultData.line,b.defaultData.column)),b.defaultData.text=""),d[0]!==h?e=e.concat(d):e.push(d));d=b;f=C(d.embeddedLanguageStack);r=void 0;f&&f.switchBack(d)&&(d.language=s[f.parentLanguage],r=d.embeddedLanguageStack.pop(),d.items=z(r.oldItems),r.oldItems={});b.reader.read()}""!==b.defaultData.text&&e.push(b.createToken("default",b.defaultData.text,b.defaultData.line,b.defaultData.column));x("afterTokenize",this,{code:a,
parserContext:b});var a=c,B=this.options,w=[],A,v,y;B.showWhitespace?(v=String.fromCharCode(183),y=Array(B.tabWidth).join(String.fromCharCode(8212))+String.fromCharCode(8594)):(v=String.fromCharCode(160),y=Array(B.tabWidth+1).join(v));A=function(a){for(var a=a.value.split(" ").join(v),b,c;0<=(b=a.indexOf("\t"));)c=a.lastIndexOf(O,b),c=-1===c?b:b-c-1,c=B.tabWidth-c%B.tabWidth,a=a.substring(0,b)+y.substring(B.tabWidth-c)+a.substring(b+1);return a};a={tokens:(a.tokens||[]).concat(b.getAllTokens()),index:a.index?
a.index+1:0,language:null,getAnalyzer:P,options:B,continuation:b.continuation,addNode:function(a){w.push(a)},createTextNode:function(a){return n.createTextNode(A(a))},getNodes:function(){return w},resetNodes:function(){w=[]},items:b.items};d=c.index?c.index+1:0;x("beforeAnalyze",this,{analyzerContext:a});if(0<a.tokens.length){a.language=s[a.tokens[0].language]||s.plaintext;c=[];for(b=U(a);d<a.tokens.length;d++)f=s[a.tokens[d].language]||s.plaintext,f.name!==a.language.name&&(t(b,a.getNodes()),a.resetNodes(),
c.push(b),a.language=f,b=U(a)),a.index=d,f=a.tokens[d].name,f="handle_"+f,r=a.getAnalyzer.call(a)||a.language.analyzer,r[f]?r[f](a):r.handleToken(a);t(b,a.getNodes());c.push(b);a.resetNodes();for(d=0;d<c.length;d++)a.addNode(c[d])}x("afterAnalyze",this,{analyzerContext:a});x("afterHighlight",this,{analyzerContext:a});return a},U=function(a){var b=n.createElement("span");b.className=a.options.classPrefix+a.language.name;return b},T,W=function(a){""===a.defaultData.text&&(a.defaultData.line=a.reader.getLine(),
a.defaultData.column=a.reader.getColumn());a.defaultData.text+=a.reader.current();return null};T=function(a){if(a.language.doNotParse.test(a.reader.current()))a=W(a);else{var b;a:{b=a.language.customParseRules;var c,d;if(b!==h)for(c=0;c<b.length;c++)if(d=b[c](a)){b=d;break a}b=null}if(!b){var f;a:{if(a.language.customTokens!==h)for(f in a.language.customTokens)if(b=w(a,a.language.customTokens[f],f),null!==b){f=b;break a}f=null}if(!f&&!(f=w(a,a.language.keywords,"keyword"))){var e;a:{var g=a.reader.current(),
k;for(e in a.language.scopes){b=a.language.scopes[e];for(c=0;c<b.length;c++)if(d=b[c][0],f=g+a.reader.peek(d.length-1),!(d!==f&&(!a.language.caseInsensitive||f.toUpperCase()!==d.toUpperCase()))){g=a.reader.getLine();k=a.reader.getColumn();a.reader.read(d.length-1);e=X(b[c],e);e=e(a,e,f,g,k);break a}}e=null}if(!e){b=a.reader.getLine();c=a.reader.getColumn();if(a.language.identFirstLetter&&a.language.identFirstLetter.test(a.reader.current())){for(e=a.reader.current();(f=a.reader.peek())!==a.reader.EOF&&
a.language.identAfterFirstLetter.test(f);)e+=a.reader.read();e=a.createToken("ident",e,b,c)}else e=null;if(!e&&!(e=a.language.numberParser(a)))if(!(e=w(a,a.language.operators,"operator")))e=a.reader.current(),e=(a.language.punctuation.test(u(e))?a.createToken("punctuation",e,a.reader.getLine(),a.reader.getColumn()):null)||W(a)}f=e}b=f}a=b}return a};var J,K;G.prototype={matchSunlightNode:function(a){J||(J=RegExp("(?:\\s|^)"+this.options.classPrefix+"highlight-(\\S+)(?:\\s|$)"));return J.exec(a.className)},
isAlreadyHighlighted:function(a){K||(K=RegExp("(?:\\s|^)"+this.options.classPrefix+"highlighted(?:\\s|$)"));return K.test(a.className)},highlight:function(a,b){return V.call(this,a,b)},highlightNode:function b(c){var d,f,e,g,h,j,i,l;if(!(this.isAlreadyHighlighted(c)||null===(d=this.matchSunlightNode(c)))){d=d[1];f=0;x("beforeHighlightNode",this,{node:c});for(e=0;e<c.childNodes.length;e++)if(3===c.childNodes[e].nodeType){j=V.call(this,c.childNodes[e].nodeValue,d,j);Q++;f=f||Q;g=j.getNodes();c.replaceChild(g[0],
c.childNodes[e]);for(h=1;h<g.length;h++)c.insertBefore(g[h],g[h-1].nextSibling)}else 1===c.childNodes[e].nodeType&&b.call(this,c.childNodes[e]);c.className+=" "+this.options.classPrefix+"highlighted";"block"===I(c,"display")&&(i=n.createElement("div"),i.className=this.options.classPrefix+"container",l=n.createElement("div"),l.className=this.options.classPrefix+"code-container",!1!==this.options.maxHeight&&(l.style.overflowY="auto",l.style.maxHeight=this.options.maxHeight+(/^\d+$/.test(this.options.maxHeight)?
"px":"")),i.appendChild(l),c.parentNode.insertBefore(l,c),c.parentNode.removeChild(c),l.appendChild(c),l.parentNode.insertBefore(i,l),l.parentNode.removeChild(l),i.appendChild(l));x("afterHighlightNode",this,{container:i,codeContainer:l,node:c,count:f})}}};m.Sunlight={version:"1.17",Highlighter:G,createAnalyzer:function(){return i(H)},globalOptions:M,highlightAll:function(b){var b=new G(b),c=n.getElementsByTagName("*"),d;for(d=0;d<c.length;d++)b.highlightNode(c[d])},registerLanguage:function(b,c){var d,
f;if(!b)throw'Languages must be registered with an identifier, e.g. "php" for PHP';c=q(q({},R),c);c.name=b;c.keywords=v(c.keywords||[],"\\b",c.caseInsensitive);c.operators=v(c.operators||[],"",c.caseInsensitive);for(d in c.customTokens)c.customTokens[d]=v(c.customTokens[d].values,c.customTokens[d].boundary,c.caseInsensitive);d=[];for(f in c.embeddedLanguages)d.push({parentLanguage:c.name,language:f,switchTo:c.embeddedLanguages[f].switchTo,switchBack:c.embeddedLanguages[f].switchBack});c.embeddedLanguages=
d;s[c.name]=c},isRegistered:function(b){return s[b]!==h},bind:function(b,c){if(!F[b])throw'Unknown event "'+b+'"';F[b].push(c)},util:{last:C,regexEscape:u,eol:O,clone:z,escapeSequences:"\\n \\t \\r \\\\ \\v \\f".split(" "),contains:p,matchWord:w,createHashMap:v,createBetweenRule:L,createProceduralRule:E,getNextNonWsToken:function(b,c){return A(b,c,1,function(b){return"default"===b.name})},getPreviousNonWsToken:function(b,c){return A(b,c,-1,function(b){return"default"===b.name})},getNextWhile:function(b,
c,d){return A(b,c,1,d)},getPreviousWhile:function(b,c,d){return A(b,c,-1,d)},whitespace:{token:"default",optional:!0},getComputedStyle:I}};m.Sunlight.registerLanguage("plaintext",{punctuation:/(?!x)x/,numberParser:P})})(this,document);
(function(m,n){if(m===n||m.registerLanguage===n)throw"Include sunlight.js before including language files";m.registerLanguage("javascript",{keywords:"break case catch continue default delete do else finally for function if in instanceof new return switch this throw try typeof var void while with true false null".split(" "),customTokens:{reservedWord:{values:"abstract boolean byte char class const debugger double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile".split(" "),
boundary:"\\b"},globalVariable:{values:["NaN","Infinity","undefined"],boundary:"\\b"},globalFunction:{values:"encodeURI encodeURIComponent decodeURI decodeURIComponent parseInt parseFloat isNaN isFinite eval".split(" "),boundary:"\\b"},globalObject:{values:"Math JSON XMLHttpRequest XDomainRequest ActiveXObject Boolean Date Array Image Function Object Number RegExp String".split(" "),boundary:"\\b"}},scopes:{string:[['"','"',m.util.escapeSequences.concat(['\\"'])],["'","'",m.util.escapeSequences.concat(["\\'",
"\\\\"])]],comment:[["//","\n",null,!0],["/*","*/"]]},customParseRules:[function(h){var i=h.reader.peek(),t="/",C=h.reader.getLine(),p=h.reader.getColumn();if(!(i="/"!==h.reader.current()||"/"===i||"*"===i)){var i=h.token(h.count()-1),q=null;""!==h.defaultData.text&&(q=h.createToken("default",h.defaultData.text));q||(q=i);i=!(q===n||"default"===q.name&&-1<q.value.indexOf("\n")||!(m.util.contains(["keyword","ident","number"],i.name)||"punctuation"===i.name&&!m.util.contains(["(","{","[",",",";"],i.value)))}if(i)return null;
for(;h.reader.peek()!==h.reader.EOF;)if(i=h.reader.peek(2),"\\/"===i||"\\\\"===i)t+=h.reader.read(2);else if(t+=i=h.reader.read(),"/"===i)break;for(;h.reader.peek()!==h.reader.EOF&&/[A-Za-z]/.test(h.reader.peek());)t+=h.reader.read();return h.createToken("regexLiteral",t,C,p)}],identFirstLetter:/[$A-Za-z_]/,identAfterFirstLetter:/[\w\$]/,namedIdentRules:{follows:[[{token:"keyword",values:["function"]},m.util.whitespace]]},operators:"++ += + -- -= - *= * /= / %= % && || |= | &= & ^= ^ >>>= >>> >>= >> <<= << <= < >= > === == !== != ! ~ ? : . =".split(" ")})})(this.Sunlight);